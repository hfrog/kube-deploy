{
"apiVersion": "v1",
"kind": "Pod",
"metadata": {
  "name": "k8s-master",
  "namespace": "kube-system"
},
"spec":{
  "hostNetwork": true,
  "containers":[
    {
      "name": "controller-manager",
      "image": "REGISTRY/hyperkube-ARCH:VERSION",
      "command": [
        "/hyperkube",
        "controller-manager",
        "--kubeconfig=/var/lib/kubelet/kubeconfig/kubeconfig.yaml",
        "--service-account-private-key-file=K8S_KEYS_DIR/kubernetes-master.key",
        "--use-service-account-credentials=true",
        "--root-ca-file=K8S_CERTS_DIR/ca.crt",
        "--min-resync-period=3m",
        "--leader-elect=true",
        "--cluster-cidr=10.1.0.0/16",
        "--profiling=false",
        "--v=2"
      ],
      "volumeMounts": [
        {
          "name": "data",
          "mountPath": "/srv/kubernetes",
          "readOnly": true
        },
        {
          "name": "kubeconfig",
          "mountPath": "/var/lib/kubelet/kubeconfig",
          "readOnly": true
        }
      ]
    },
    {
      "name": "apiserver",
      "image": "REGISTRY/hyperkube-ARCH:VERSION",
      "command": [
        "/hyperkube",
        "apiserver",
        "--service-cluster-ip-range=SERVICE_NETWORK.1/24",
        "--insecure-port=0",
        "--secure-port=443",
        "--etcd-servers=http://ETCD_IP:2379",
        "--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds,DenyEscalatingExec,SecurityContextDeny",
        "--client-ca-file=K8S_CERTS_DIR/ca.crt",
        "--basic-auth-file=/srv/kubernetes/basic_auth.csv",
        "--min-request-timeout=300",
        "--tls-cert-file=K8S_CERTS_DIR/kubernetes-master.crt",
        "--tls-private-key-file=K8S_KEYS_DIR/kubernetes-master.key",
        "--tls-ca-file=K8S_CERTS_DIR/ca.crt",
        "--service-account-lookup=true",
        "--service-account-key-file=K8S_KEYS_DIR/kubernetes-master.key",
        "--authorization-mode=RBAC",
        "--allow-privileged=true",
        "--anonymous-auth=false",
        "--profiling=false",
        "--v=2"
      ],
      "volumeMounts": [
        {
          "name": "data",
          "mountPath": "/srv/kubernetes",
          "readOnly": true
        },
        {
          "name": "kubeconfig",
          "mountPath": "/var/lib/kubelet/kubeconfig",
          "readOnly": true
        }
      ]
    },
    {
      "name": "scheduler",
      "image": "REGISTRY/hyperkube-ARCH:VERSION",
      "command": [
        "/hyperkube",
        "scheduler",
        "--kubeconfig=/var/lib/kubelet/kubeconfig/kubeconfig.yaml",
        "--leader-elect=true",
        "--profiling=false",
        "--v=2"
      ],
      "volumeMounts": [
        {
          "name": "data",
          "mountPath": "/srv/kubernetes",
          "readOnly": true
        },
        {
          "name": "kubeconfig",
          "mountPath": "/var/lib/kubelet/kubeconfig",
          "readOnly": true
        }
      ]
    }
  ],
  "volumes": [
    {
      "name": "data",
      "hostPath": {
        "path": "/srv/kubernetes"
      }
    },
    {
      "name": "kubeconfig",
      "hostPath": {
        "path": "/var/lib/kubelet/kubeconfig"
      }
    }
  ]
 }
}
